<%
  sale = local_assigns[:sale]
  total_items = sale.sale_items.sum(&:quantity)
  total = sale.total_amount
  show_alterar_on_mobile = local_assigns[:show_alterar_on_mobile]
%>

<div id="sale_summary" class="flex items-center justify-between mb-3 px-1">
  <div class="flex flex-col">
    <div class="flex items-center gap-2 flex-wrap">
      <span class="text-xs text-gray-500 dark:text-gray-400">
        <%= total_items %> <%= total_items == 1 ? 'item selecionado' : 'itens selecionados' %>
      </span>
      <% if show_alterar_on_mobile && sale.sale_items.any? %>
        <button type="button"
                @click="showItemsModal = true"
                class="lg:hidden text-xs font-semibold text-primary hover:text-primary-dark transition-colors">
          Alterar
        </button>
      <% end %>
    </div>
    <span class="text-lg font-bold text-[#0e1b12] dark:text-white">
      Total: <%= number_to_currency(total, unit: "R$ ", separator: ",", delimiter: ".") %>
    </span>
  </div>
  <div class="w-10 h-10 rounded-full bg-primary/20 flex items-center justify-center text-primary">
    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
    </svg>
  </div>
</div>
