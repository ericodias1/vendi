  [1m[35mSQL (0.6ms)[0m  [1m[35mSET search_path TO public /*application='Vendi'*/[0m
  [1m[35m (983.9ms)[0m  [1m[35mCREATE DATABASE "vendi_development" ENCODING = 'unicode' /*application='Vendi'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='Vendi'*/[0m
  [1m[35m (478.3ms)[0m  [1m[35mCREATE DATABASE "vendi_test" ENCODING = 'unicode' /*application='Vendi'*/[0m
  [1m[35m (9.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY) /*application='Vendi'*/[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='Vendi'*/[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(1087776236162745990) /*application='Vendi'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='Vendi'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (3.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='Vendi'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (3.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2026-01-20 13:59:55.263707', '2026-01-20 13:59:55.263709') RETURNING "key" /*application='Vendi'*/[0m
Migrating to CreateAccounts (20260120135809)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='Vendi'*/[0m
  [1m[35m (19.7ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" bigserial primary key, "name" character varying NOT NULL, "slug" character varying NOT NULL, "whatsapp" character varying, "store_type" character varying, "logo_url" character varying, "timezone" character varying DEFAULT 'America/Sao_Paulo', "active" boolean DEFAULT TRUE NOT NULL, "onboarding_completed_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='Vendi'*/[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_accounts_on_slug" ON "accounts" ("slug") /*application='Vendi'*/[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE INDEX "index_accounts_on_active" ON "accounts" ("active") /*application='Vendi'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20260120135809') RETURNING "version" /*application='Vendi'*/[0m
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mCOMMIT /*application='Vendi'*/[0m
Migrating to CreateAccountConfigs (20260120135815)
  [1m[35m (0.7ms)[0m  [1m[34mSELECT pg_advisory_unlock(1087776236162745990) /*application='Vendi'*/[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(1087776236162745990) /*application='Vendi'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='Vendi'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='Vendi'*/[0m
Migrating to CreateAccountConfigs (20260120135815)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='Vendi'*/[0m
  [1m[35m (24.5ms)[0m  [1m[35mCREATE TABLE "account_configs" ("id" bigserial primary key, "account_id" bigint NOT NULL, "daily_goal" decimal(10,2) DEFAULT 0.0, "weekly_goal" decimal(10,2), "monthly_goal" decimal(10,2), "stock_alerts_enabled" boolean DEFAULT TRUE, "stock_alert_threshold" integer DEFAULT 3, "pix_enabled" boolean DEFAULT TRUE, "card_enabled" boolean DEFAULT TRUE, "cash_enabled" boolean DEFAULT TRUE, "credit_enabled" boolean DEFAULT FALSE, "require_customer" boolean DEFAULT FALSE, "auto_send_payment_link" boolean DEFAULT FALSE, "additional_settings" jsonb DEFAULT '{}', "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_a2acef1258"
FOREIGN KEY ("account_id")
  REFERENCES "accounts" ("id")
) /*application='Vendi'*/[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE INDEX "index_account_configs_on_account_id" ON "account_configs" ("account_id") /*application='Vendi'*/[0m
  [1m[35m (23.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_account_configs_on_account_id" ON "account_configs" ("account_id") /*application='Vendi'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK /*application='Vendi'*/[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(1087776236162745990) /*application='Vendi'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (2.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='Vendi'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='Vendi'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='Vendi'*/[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(1087776236162745990) /*application='Vendi'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='Vendi'*/[0m
Reverting CreateAccounts (20260120135809)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='Vendi'*/[0m
  [1m[35m (1.0ms)[0m  [1m[35mDROP INDEX  "index_accounts_on_active" /*application='Vendi'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP INDEX  "index_accounts_on_slug" /*application='Vendi'*/[0m
  [1m[35m (5.7ms)[0m  [1m[35mDROP TABLE "accounts" /*application='Vendi'*/[0m
  [1m[36mActiveRecord::SchemaMigration Destroy (1.1ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = '20260120135809' /*application='Vendi'*/[0m
  [1m[36mTRANSACTION (22.7ms)[0m  [1m[35mCOMMIT /*application='Vendi'*/[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(1087776236162745990) /*application='Vendi'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='Vendi'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='Vendi'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO "$user", public /*application='Vendi'*/[0m
  [1m[35mSQL (0.5ms)[0m  [1m[35mSET search_path TO public /*application='Vendi'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO "$user", public /*application='Vendi'*/[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(1087776236162745990) /*application='Vendi'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (3.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='Vendi'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='Vendi'*/[0m
Migrating to CreateAccounts (20260120135809)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='Vendi'*/[0m
  [1m[35m (22.1ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" bigserial primary key, "name" character varying NOT NULL, "slug" character varying NOT NULL, "whatsapp" character varying, "store_type" character varying, "logo_url" character varying, "timezone" character varying DEFAULT 'America/Sao_Paulo', "active" boolean DEFAULT TRUE NOT NULL, "onboarding_completed_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='Vendi'*/[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_accounts_on_slug" ON "accounts" ("slug") /*application='Vendi'*/[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE INDEX "index_accounts_on_active" ON "accounts" ("active") /*application='Vendi'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20260120135809') RETURNING "version" /*application='Vendi'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='Vendi'*/[0m
Migrating to CreateAccountConfigs (20260120135815)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN /*application='Vendi'*/[0m
  [1m[35m (10.4ms)[0m  [1m[35mCREATE TABLE "account_configs" ("id" bigserial primary key, "account_id" bigint NOT NULL, "daily_goal" decimal(10,2) DEFAULT 0.0, "weekly_goal" decimal(10,2), "monthly_goal" decimal(10,2), "stock_alerts_enabled" boolean DEFAULT TRUE, "stock_alert_threshold" integer DEFAULT 3, "pix_enabled" boolean DEFAULT TRUE, "card_enabled" boolean DEFAULT TRUE, "cash_enabled" boolean DEFAULT TRUE, "credit_enabled" boolean DEFAULT FALSE, "require_customer" boolean DEFAULT FALSE, "auto_send_payment_link" boolean DEFAULT FALSE, "additional_settings" jsonb DEFAULT '{}', "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_a2acef1258"
FOREIGN KEY ("account_id")
  REFERENCES "accounts" ("id")
) /*application='Vendi'*/[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_account_configs_on_account_id" ON "account_configs" ("account_id") /*application='Vendi'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20260120135815') RETURNING "version" /*application='Vendi'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='Vendi'*/[0m
Migrating to CreateUsers (20260120135817)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN /*application='Vendi'*/[0m
  [1m[35m (7.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "account_id" bigint NOT NULL, "email" character varying NOT NULL, "password_digest" character varying NOT NULL, "name" character varying, "phone" character varying, "role" character varying DEFAULT 'employee', "active" boolean DEFAULT TRUE NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_61ac11da2b"
FOREIGN KEY ("account_id")
  REFERENCES "accounts" ("id")
) /*application='Vendi'*/[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE INDEX "index_users_on_account_id" ON "users" ("account_id") /*application='Vendi'*/[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email_and_account_id" ON "users" ("email", "account_id") /*application='Vendi'*/[0m
  [1m[35m (19.0ms)[0m  [1m[35mCREATE INDEX "index_users_on_account_id" ON "users" ("account_id") /*application='Vendi'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK /*application='Vendi'*/[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(1087776236162745990) /*application='Vendi'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='Vendi'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='Vendi'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='Vendi'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='Vendi'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='Vendi'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='Vendi'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='Vendi'*/[0m
  [1m[35m (154.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "vendi_development" /*application='Vendi'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public /*application='Vendi'*/[0m
  [1m[35m (37.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "vendi_test" /*application='Vendi'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public /*application='Vendi'*/[0m
  [1m[35m (121.5ms)[0m  [1m[35mCREATE DATABASE "vendi_development" ENCODING = 'unicode' /*application='Vendi'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public /*application='Vendi'*/[0m
  [1m[35m (100.5ms)[0m  [1m[35mCREATE DATABASE "vendi_test" ENCODING = 'unicode' /*application='Vendi'*/[0m
  [1m[35mSQL (7.1ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog /*application='Vendi'*/[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY) /*application='Vendi'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='Vendi'*/[0m
  [1m[35m (1.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (0) /*application='Vendi'*/[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='Vendi'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='Vendi'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2026-01-20 14:00:28.613108', '2026-01-20 14:00:28.613109') RETURNING "key" /*application='Vendi'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='Vendi'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'schema_sha1' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='Vendi'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', 'a71d23a9d8025196df4aad6f0cbff1ce3af537cf', '2026-01-20 14:00:28.615423', '2026-01-20 14:00:28.615424') RETURNING "key" /*application='Vendi'*/[0m
  [1m[35mSQL (6.6ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog /*application='Vendi'*/[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY) /*application='Vendi'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='Vendi'*/[0m
  [1m[35m (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (0) /*application='Vendi'*/[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='Vendi'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='Vendi'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (1.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2026-01-20 14:00:28.634969', '2026-01-20 14:00:28.634974') RETURNING "key" /*application='Vendi'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='Vendi'*/[0m
  [1m[36mActiveRecord::InternalMetadata Update (0.3ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = 'test', "updated_at" = '2026-01-20 14:00:28.637471' WHERE "ar_internal_metadata"."key" = 'environment' /*application='Vendi'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'schema_sha1' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='Vendi'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', 'a71d23a9d8025196df4aad6f0cbff1ce3af537cf', '2026-01-20 14:00:28.638728', '2026-01-20 14:00:28.638730') RETURNING "key" /*application='Vendi'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='Vendi'*/[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(1087776236162745990) /*application='Vendi'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='Vendi'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='Vendi'*/[0m
Migrating to CreateAccounts (20260120135809)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='Vendi'*/[0m
  [1m[35m (14.0ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" bigserial primary key, "name" character varying NOT NULL, "slug" character varying NOT NULL, "whatsapp" character varying, "store_type" character varying, "logo_url" character varying, "timezone" character varying DEFAULT 'America/Sao_Paulo', "active" boolean DEFAULT TRUE NOT NULL, "onboarding_completed_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='Vendi'*/[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_accounts_on_slug" ON "accounts" ("slug") /*application='Vendi'*/[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE INDEX "index_accounts_on_active" ON "accounts" ("active") /*application='Vendi'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20260120135809') RETURNING "version" /*application='Vendi'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='Vendi'*/[0m
Migrating to CreateAccountConfigs (20260120135815)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN /*application='Vendi'*/[0m
  [1m[35m (7.7ms)[0m  [1m[35mCREATE TABLE "account_configs" ("id" bigserial primary key, "account_id" bigint NOT NULL, "daily_goal" decimal(10,2) DEFAULT 0.0, "weekly_goal" decimal(10,2), "monthly_goal" decimal(10,2), "stock_alerts_enabled" boolean DEFAULT TRUE, "stock_alert_threshold" integer DEFAULT 3, "pix_enabled" boolean DEFAULT TRUE, "card_enabled" boolean DEFAULT TRUE, "cash_enabled" boolean DEFAULT TRUE, "credit_enabled" boolean DEFAULT FALSE, "require_customer" boolean DEFAULT FALSE, "auto_send_payment_link" boolean DEFAULT FALSE, "additional_settings" jsonb DEFAULT '{}', "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_a2acef1258"
FOREIGN KEY ("account_id")
  REFERENCES "accounts" ("id")
) /*application='Vendi'*/[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_account_configs_on_account_id" ON "account_configs" ("account_id") /*application='Vendi'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20260120135815') RETURNING "version" /*application='Vendi'*/[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT /*application='Vendi'*/[0m
Migrating to CreateUsers (20260120135817)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN /*application='Vendi'*/[0m
  [1m[35m (4.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "account_id" bigint NOT NULL, "email" character varying NOT NULL, "password_digest" character varying NOT NULL, "name" character varying, "phone" character varying, "role" character varying DEFAULT 'employee', "active" boolean DEFAULT TRUE NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_61ac11da2b"
FOREIGN KEY ("account_id")
  REFERENCES "accounts" ("id")
) /*application='Vendi'*/[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email_and_account_id" ON "users" ("email", "account_id") /*application='Vendi'*/[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE INDEX "index_users_on_account_id" ON "users" ("account_id") /*application='Vendi'*/[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE INDEX "index_users_on_active" ON "users" ("active") /*application='Vendi'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20260120135817') RETURNING "version" /*application='Vendi'*/[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT /*application='Vendi'*/[0m
Migrating to CreateProducts (20260120135818)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN /*application='Vendi'*/[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "account_id" bigint NOT NULL, "name" character varying NOT NULL, "description" text, "sku" character varying, "supplier_code" character varying, "base_price" decimal(10,2), "cost_price" decimal(10,2), "category" character varying, "brand" character varying, "color" character varying, "material" character varying, "active" boolean DEFAULT TRUE NOT NULL, "position" integer, "custom_fields" jsonb DEFAULT '{}', "deleted_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_6dc06b37ef"
FOREIGN KEY ("account_id")
  REFERENCES "accounts" ("id")
) /*application='Vendi'*/[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_products_on_account_id" ON "products" ("account_id") /*application='Vendi'*/[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_products_on_account_id_and_sku" ON "products" ("account_id", "sku") WHERE sku IS NOT NULL /*application='Vendi'*/[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_products_on_active" ON "products" ("active") /*application='Vendi'*/[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE INDEX "index_products_on_deleted_at" ON "products" ("deleted_at") /*application='Vendi'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20260120135818') RETURNING "version" /*application='Vendi'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='Vendi'*/[0m
Migrating to CreateSales (20260120135820)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN /*application='Vendi'*/[0m
  [1m[35m (22.1ms)[0m  [1m[35mCREATE TABLE "sales" ("id" bigserial primary key, "account_id" bigint NOT NULL, "user_id" bigint NOT NULL, "customer_id" bigint, "sale_number" character varying NOT NULL, "status" character varying DEFAULT 'draft' NOT NULL, "subtotal" decimal(10,2) DEFAULT 0.0, "discount_amount" decimal(10,2) DEFAULT 0.0, "discount_percentage" decimal(5,2), "total_amount" decimal(10,2) DEFAULT 0.0, "total_items" integer DEFAULT 0, "observations" text, "payment_link_token" character varying, "payment_link_sent_at" timestamp(6), "completed_at" timestamp(6), "cancelled_at" timestamp(6), "cancellation_reason" text, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_6e7599c2ae"
FOREIGN KEY ("account_id")
  REFERENCES "accounts" ("id")
, CONSTRAINT "fk_rails_8e94f16ccc"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_7c1f560977"
FOREIGN KEY ("customer_id")
  REFERENCES "customers" ("id")
) /*application='Vendi'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK /*application='Vendi'*/[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(1087776236162745990) /*application='Vendi'*/[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(1087776236162745990) /*application='Vendi'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (2.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='Vendi'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='Vendi'*/[0m
Migrating to CreateCustomers (20260120135819)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='Vendi'*/[0m
  [1m[35m (10.9ms)[0m  [1m[35mCREATE TABLE "customers" ("id" bigserial primary key, "account_id" bigint NOT NULL, "name" character varying NOT NULL, "phone" character varying, "email" character varying, "cpf" character varying, "street" character varying, "number" character varying, "complement" character varying, "neighborhood" character varying, "city" character varying, "state" character varying, "zipcode" character varying, "observations" text, "active" boolean DEFAULT TRUE NOT NULL, "total_purchases" integer DEFAULT 0, "total_spent" decimal(10,2) DEFAULT 0.0, "last_purchase_at" timestamp(6), "deleted_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_ed7ccfecee"
FOREIGN KEY ("account_id")
  REFERENCES "accounts" ("id")
) /*application='Vendi'*/[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE INDEX "index_customers_on_account_id" ON "customers" ("account_id") /*application='Vendi'*/[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE INDEX "index_customers_on_active" ON "customers" ("active") /*application='Vendi'*/[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE INDEX "index_customers_on_deleted_at" ON "customers" ("deleted_at") /*application='Vendi'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20260120135819') RETURNING "version" /*application='Vendi'*/[0m
  [1m[36mTRANSACTION (3.7ms)[0m  [1m[35mCOMMIT /*application='Vendi'*/[0m
Migrating to CreateSales (20260120135820)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN /*application='Vendi'*/[0m
  [1m[35m (8.5ms)[0m  [1m[35mCREATE TABLE "sales" ("id" bigserial primary key, "account_id" bigint NOT NULL, "user_id" bigint NOT NULL, "customer_id" bigint, "sale_number" character varying NOT NULL, "status" character varying DEFAULT 'draft' NOT NULL, "subtotal" decimal(10,2) DEFAULT 0.0, "discount_amount" decimal(10,2) DEFAULT 0.0, "discount_percentage" decimal(5,2), "total_amount" decimal(10,2) DEFAULT 0.0, "total_items" integer DEFAULT 0, "observations" text, "payment_link_token" character varying, "payment_link_sent_at" timestamp(6), "completed_at" timestamp(6), "cancelled_at" timestamp(6), "cancellation_reason" text, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_6e7599c2ae"
FOREIGN KEY ("account_id")
  REFERENCES "accounts" ("id")
, CONSTRAINT "fk_rails_8e94f16ccc"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_7c1f560977"
FOREIGN KEY ("customer_id")
  REFERENCES "customers" ("id")
) /*application='Vendi'*/[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE INDEX "index_sales_on_account_id" ON "sales" ("account_id") /*application='Vendi'*/[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE INDEX "index_sales_on_user_id" ON "sales" ("user_id") /*application='Vendi'*/[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE INDEX "index_sales_on_customer_id" ON "sales" ("customer_id") /*application='Vendi'*/[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_sales_on_sale_number" ON "sales" ("sale_number") /*application='Vendi'*/[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE INDEX "index_sales_on_status" ON "sales" ("status") /*application='Vendi'*/[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE INDEX "index_sales_on_created_at" ON "sales" ("created_at") /*application='Vendi'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20260120135820') RETURNING "version" /*application='Vendi'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='Vendi'*/[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT pg_advisory_unlock(1087776236162745990) /*application='Vendi'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='Vendi'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='Vendi'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO "$user", public /*application='Vendi'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='Vendi'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO "$user", public /*application='Vendi'*/[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(1087776236162745990) /*application='Vendi'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='Vendi'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='Vendi'*/[0m
Migrating to AddDiscardedAtToAccounts (20260120140125)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='Vendi'*/[0m
  [1m[35m (3.5ms)[0m  [1m[35mALTER TABLE "accounts" ADD "discarded_at" timestamp(6) /*application='Vendi'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20260120140125') RETURNING "version" /*application='Vendi'*/[0m
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT /*application='Vendi'*/[0m
Migrating to AddDiscardedAtToProducts (20260120140127)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN /*application='Vendi'*/[0m
  [1m[35m (5.0ms)[0m  [1m[35mALTER TABLE "products" ADD "discarded_at" timestamp(6) /*application='Vendi'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20260120140127') RETURNING "version" /*application='Vendi'*/[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT /*application='Vendi'*/[0m
Migrating to AddDiscardedAtToCustomers (20260120140129)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='Vendi'*/[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "customers" ADD "discarded_at" timestamp(6) /*application='Vendi'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20260120140129') RETURNING "version" /*application='Vendi'*/[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT /*application='Vendi'*/[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(1087776236162745990) /*application='Vendi'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='Vendi'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='Vendi'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO "$user", public /*application='Vendi'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='Vendi'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO "$user", public /*application='Vendi'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='Vendi'*/[0m
  [1m[36mAccount Exists? (3.6ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."slug" = 'test' LIMIT 1 /*application='Vendi'*/[0m
  [1m[36mAccount Create (5.1ms)[0m  [1m[32mINSERT INTO "accounts" ("name", "slug", "whatsapp", "store_type", "logo_url", "timezone", "active", "onboarding_completed_at", "created_at", "updated_at", "discarded_at") VALUES ('Test', 'test', NULL, NULL, NULL, 'America/Sao_Paulo', TRUE, NULL, '2026-01-20 14:01:34.528573', '2026-01-20 14:01:34.528573', NULL) RETURNING "id" /*application='Vendi'*/[0m
  [1m[36mTRANSACTION (3.1ms)[0m  [1m[35mCOMMIT /*application='Vendi'*/[0m
